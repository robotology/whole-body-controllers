## Module description

This module implements a torque control balancing strategy. It computes the interaction forces at the feet/legs in order to stabilise a desired centroidal dynamics, which implies the tracking of a desired center-of-mass trajectory. A cost function penalizing high joint torques - that generate the feet forces - is added to the control framework.

For details see [iCub whole-body control through force regulation on rigid non-coplanar contacts](http://journal.frontiersin.org/article/10.3389/frobt.2015.00006/abstract)

### Dependencies

In order to run the simulation of iCub standing up from a chair, make sure you have installed on your pc the following dependencies:

 - Both iCub and the chair models are stored into [icub-gazebo-wholebody](https://github.com/robotology-playground/icub-gazebo-wholebody) repository.

 It is suggested to install the above mentioned repository using [codyco-superbuild](https://github.com/robotology/codyco-superbuild) (enable `CODYCO_USES_GAZEBO`, `CODYCO_USES_MATLAB`, options).
 
### Installation

1) In your `.bashrc` file, add the following line to your `GAZEBO_RESOURCE_PATH`:
    
  ```
    source /usr/share/gazebo/setup.sh
    export GAZEBO_RESOURCE_PATH=$GAZEBO_RESOURCE_PATH:/PATH/WHERE/YOUR/WORLD/IS
   
  ```
 
  Instead of opening Gazebo as usual, on a terminal type:

   `gazebo -slibgazebo_yarp_clock.so nameOfYourWorld` where for iCub standup demo `nameOfYourWorld = icub_standup_world`.

   and it will load the correct model.

### Simulations

To run iCub stand up demo, do not run the `yarpmotorgui`: iCub is already in its home position!

### Compatibility

The repository contains the Simulink model `momentumBasedStandup.mdl`, which is generated by using Matlab R2016b.

### Supported robots

Currently, supported robots are: `iCubGenova04`, `iCubGenova02`, `icubGazeboSim`.

## Module details

### Configuration file

At start, the module calls the initialization file initMomentumBasedStandup.m. Once opened, this file contains some configuration variables. Please follow the instruction inside the script to properly configure your simulation.

### Robot and demo specific configurations

The gains and references for a specific robot (specified by the variable YARP_ROBOT_NAME) or a specific demo can be found in the folder `app/robots/YARP_ROBOT_NAME`.
